{% extends 'accounts/main.html' %}

{% block content %}

<center>
    <br>
    <div class="row">

        <div class="col zoom">
            <div class="col-md">
                <div class="card text-center text white mb-3" id="total-orders">
                    <div class="card-header">
                        <h4 class="card-title">Total Complete Amount</h4>
                    </div>
                    <div class="card-body">
                        <h3 class="card-title">{{total_complete_amount}}</h3>
                    </div>
                </div>
            </div>
        </div>

        <div class="col zoom">
            <div class="col-md">
                <div class="card text-center text white mb-3" id="total-orders">
                    <div class="card-header">
                        <h4 class="card-title">Total Amount</h4>
                    </div>
                    <div class="card-body">
                        <h3 class="card-title"><a href="/amounts/" style="color:black;">{{total_amount}}</a></h3>
                    </div>
                    <a href="{% url 'create_amount' %}" class="btn btn-primary btn-sm btn-block">Create Amount</a>
                </div>
            </div>
        </div>


        <div class="col zoom">
            <div class="col-md">
                {% if total_pending_amount == 0 %}

                <div class="card text-center text white mb-3" id="total-orders">
                    <div class="card-header">
                        <h4 class="card-title" style="color:black;">Total Pending Amount</h4>
                    </div>
                    <div class="card-body">
                        <h3 class="card-title"><a href="/pending_amount/"
                                                  style="color:black;">{{total_pending_amount}}</a>
                        </h3>
                    </div>
                </div>

                {% else %}
                <div class="card text-center text white mb-3" id="total-orders">
                    <div class="card-header">
                        <h4 class="card-title" style="color:red;">Total Pending Amount</h4>
                    </div>
                    <div class="card-body">
                        <h3 class="card-title"><a href="/pending_amount/"
                                                  style="color:red;">{{total_pending_amount}}</a></h3>
                    </div>
                </div>

                {% endif %}

            </div>
        </div>

    </div>

    <br>
    <div class="row">

        <div class="col zoom">
            <div class="col-md">
                <div class="card text-center text white mb-3" id="total-orders">
                    <div class="card-header">
                        <h4 class="card-title">Total Complete</h4>
                    </div>
                    <div class="card-body">
                        <h3 class="card-title">{{completeCount}}</h3>
                    </div>
                </div>
            </div>
        </div>

        <div class="col">
            <div class="card card-body">
                <table>
                    <tr>
                        <td>From Date:</td>
                        <td><input class="form-control" id="from_date" onchange="onDateChange()" type="date"
                                   placeholder="From Date"></td>
                    </tr>
                    <tr>
                        <td>To Date:</td>
                        <td><input class="form-control" id="to_date" onchange="onDateChange()" type="date"
                                   placeholder="To Date"></td>
                    </tr>
                </table>
            </div>
        </div>


        <div class="col zoom">
            <div class="col-md">
                {% if pendingCount == 0 %}
                <div class="card text-center text white mb-3" id="total-orders">
                    <div class="card-header">
                        <h4 class="card-title" style="color:black;">Total Pending</h4>
                    </div>
                    <div class="card-body">
                        <h3 class="card-title"><a href="/pending_amount/"
                                                  style="color:black;">{{pendingCount}}</a></h3>
                    </div>
                </div>
                {% else %}
                <div class="card text-center text white mb-3" id="total-orders">
                    <div class="card-header">
                        <h4 class="card-title" style="color:red;">Total Pending</h4>
                    </div>
                    <div class="card-body">
                        <h3 class="card-title"><a href="/pending_amount/"
                                                  style="color:red;">{{pendingCount}}</a></h3>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>

    </div>

</center>

<div class="row">
    <div class="col">
        <div class="card card-body">
            <table id="amount" class="table table-striped table-hover">
                <thead class="thead-dark">
                <tr>
                    <th>Payment Date</th>
                    <th>Member's Name</th>
                    <th>Total Amount</th>
                    <th>Status</th>
                </tr>
                </thead>
                <tbody id="myTable">

                {% for a in amount %}

                {% if a.status == 'Pending' %}

                <tr class="table-danger">
                    <td>{{a.date}}</td>
                    <td>{{a.profile.name}}</td>
                    <td>{{a.amount}}</td>
                    <td>{{a.status}}</td>
                </tr>

                {% else %}

                <tr class="table-success">
                    <td>{{a.date}}</td>
                    <td>{{a.profile.name}}</td>
                    <td>{{a.amount}}</td>
                    <td>{{a.status}}</td>
                </tr>
                {% endif%}

                {% endfor %}
                </tbody>

                <tfoot class="thead-dark">

                <tr>
                    <th>Payment Date</th>
                    <th>Member's Name</th>
                    <th>Amount: {{total_amount}}</th>
                    <th>Status</th>
                </tr>
                </tfoot>

            </table>
        </div>
    </div>
</div>

<script>
    $('#amount').DataTable();
</script>

<script>
    <!--From date to date filter-->


function onDateChange(){
    var fromDate = document.getElementById('from_date').value;
    var toDate = document.getElementById('to_date').value;
    var amountTable = document.getElementById('myTable').column;

    console.log(amountTable);

    if(fromDate && toDate){

        if(toDate >= fromDate){
            console.log(fromDate+":"+toDate);

        }
        else{
            alert("To date must be greater than From date")
        }
    }
}




</script>

{% endblock content %}
